<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>99 Squares Guessing Game</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f2f2f2;
  text-align: center;
  padding: 10px;
}

.board {
  display: grid;
  grid-template-columns: repeat(10, 1fr);
  gap: 5px;
  max-width: 95vw;
  margin: auto;
}

.cell {
  background: #c8a165;
  border-radius: 6px;
  aspect-ratio: 1/1;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  position: relative;
  cursor: pointer;
}

.cell.opened {
  background: #eee;
}

.number {
  position: absolute;
  font-size: 14px;
}

.circle {
  width: 65%;
  height: 65%;
  border-radius: 50%;
  display: none;
}

.cell.opened .circle {
  display: block;
}

.status {
  margin: 10px;
  font-weight: bold;
}
</style>
</head>

<body>

<h2>ðŸŽ² 99 Squares Guessing Game</h2>

<input type="password" id="win" placeholder="Host #" />
<button onclick="start()">Start</button>

<div class="status" id="status"></div>
<div class="board" id="board"></div>

<script>
const MAX = 20;
let board = {}, opened = new Set(), count = {}, tries = 0, asked = false, win;

function start() {
  win = parseInt(document.getElementById('win').value);
  if (!win || win < 1 || win > 99) {
    alert("Enter number between 1â€“99");
    return;
  }
  setup();
  draw();
  status("Game Started");
}

function setup() {
  board = {}; opened.clear(); count = {}; tries = 0; asked = false;
  let colors = [];
  ['Red','Pink','Yellow','Blue'].forEach(c => {
    for (let i = 0; i < 20; i++) colors.push(c);
  });
  for (let i = 0; i < 19; i++) colors.push('Black');
  shuffle(colors);

  let k = 0;
  for (let i = 1; i <= 99; i++) {
    board[i] = (i === win) ? 'Green' : colors[k++];
  }
}

function draw() {
  const b = document.getElementById('board');
  b.innerHTML = '';
  for (let i = 1; i <= 100; i++) {
    const cell = document.createElement('div');

    if (i === 100) {
      cell.style.visibility = 'hidden';
      b.appendChild(cell);
      continue;
    }

    cell.className = 'cell';

    const num = document.createElement('div');
    num.className = 'number';
    num.innerText = i;

    const circle = document.createElement('div');
    circle.className = 'circle';
    circle.style.background = board[i];

    cell.appendChild(circle);
    cell.appendChild(num);

    cell.onclick = () => openCell(i, cell);
    b.appendChild(cell);
  }
}

function openCell(n, cell) {
  if (opened.has(n) || tries >= MAX) return;

  opened.add(n);
  tries++;
  cell.classList.add('opened');

  const color = board[n];
  count[color] = (count[color] || 0) + 1;

  if (n === win) {
    status("ðŸŽ‰ YOU FOUND THE GREEN! YOU WIN!");
    lock();
    return;
  }

  if (count[color] === 3 && color !== 'Green' && !asked) {
    asked = true;
    setTimeout(() => ask(), 200);
  }

  if (tries >= MAX) {
    status("ðŸ’€ GAME OVER");
    lock();
    return;
  }

  status(`Opened ${tries}/${MAX}`);
}

function ask() {
  const q = prompt("Ask a Yes/No question (no numbers)");
  if (/\d/.test(q)) alert("Invalid question");
  else alert("Host answers YES or NO");
}

function status(t) {
  document.getElementById('status').innerText = t;
}

function lock() {
  document.querySelectorAll('.cell').forEach(c => c.onclick = null);
}

function shuffle(a) {
  for (let i = a.length - 1; i > 0; i--) {
    let j = Math.floor(Math.random() * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
}
</script>

</body>
</html>
